let a=null;function u(){const t=new Set,e={isPlaying:!1,isBuffering:!1,url:null,title:"Sheddy's New Look Radio",subtitle:"Live Stream",error:null},r=()=>{t.forEach(i=>{try{i({...e})}catch{}})},l=()=>(a.audio||(a.audio=new Audio,a.audio.preload="none",a.audio.addEventListener("play",()=>{e.isPlaying=!0,e.isBuffering=!1,e.error=null,r()}),a.audio.addEventListener("pause",()=>{e.isPlaying=!1,e.isBuffering=!1,r()}),a.audio.addEventListener("waiting",()=>{e.isPlaying&&(e.isBuffering=!0,r())}),a.audio.addEventListener("playing",()=>{e.isBuffering=!1,r()}),a.audio.addEventListener("ended",()=>{e.isPlaying=!1,e.isBuffering=!1,r()}),a.audio.addEventListener("error",()=>{e.isPlaying=!1,e.isBuffering=!1,e.error="Imeshindikana ku-play stream. Hakikisha link ni sahihi.",r()})),a.audio);return a={audio:null,getState(){return{...e}},subscribe(i){return t.add(i),i({...e}),()=>t.delete(i)},async play(i,s={}){if(!i){e.error="Stream URL haijawekwa bado.",r();return}const n=l();e.url=i,e.title=s.title??e.title,e.subtitle=s.subtitle??e.subtitle,e.error=null,n.src!==i&&(n.pause(),n.src=i),e.isBuffering=!0,r();try{await n.play()}catch{e.isPlaying=!1,e.isBuffering=!1,e.error="Imeshindikana ku-play stream. Hakikisha link ni sahihi.",r()}},pause(){l().pause()},async toggle(i,s={}){const n={...e};if(n.isPlaying){this.pause();return}await this.play(i??n.url,s)}},a}function d(){return typeof window>"u"?u():(window.__sr_radio_player||(window.__sr_radio_player=u()),window.__sr_radio_player)}export{d as g};
