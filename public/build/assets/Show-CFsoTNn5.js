import{u as y,r as u,a as S,j as e,H as _,L as o}from"./app-CM4sbrza.js";import $ from"./Header-DCzUZIJa.js";import z from"./Footer-Dk7aE-x-.js";import{F as M}from"./FloatingRadioPlayer-C1llPmpi.js";import"./radioPlayer-D1uJMMe3.js";function T(t){if(!t)return"";const a=new Date(t);if(Number.isNaN(a.getTime()))return t;const l=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();return`${l}/${r}/${i}`}function g(t){if(!t)return"";const a=new Date(t);if(Number.isNaN(a.getTime()))return"";const l=Math.max(0,Date.now()-a.getTime()),r=Math.floor(l/6e4);if(r<1)return"Sasa hivi";if(r<60)return`${r} dk zilizopita`;const i=Math.floor(r/60);return i<24?`${i} saa zilizopita`:`${Math.floor(i/24)} siku zilizopita`}function D(t){return t?String(t).split(/\n\s*\n/).map(a=>a.trim()).filter(Boolean):[]}function P({blog:t,comments:a,moreBlogs:l,laravelVersion:r,phpVersion:i}){const{auth:c}=y().props,f=u.useMemo(()=>D(t?.body),[t?.body]),[p,x]=u.useState(!1),{data:m,setData:h,post:b,processing:j,errors:n,reset:w}=S({name:"",message:""}),v=s=>{s.preventDefault(),b(`/blogs/${t.slug}/comments`,{preserveScroll:!0,onSuccess:()=>w("message")})};async function N(){const s=`/blogs/${t.slug}`,d=typeof window<"u"?`${window.location.origin}${s}`:s,k=t?.title??"Sheddy's Radio";try{typeof navigator<"u"&&navigator.share?await navigator.share({title:k,url:d}):typeof navigator<"u"&&navigator.clipboard?.writeText&&(await navigator.clipboard.writeText(d),x(!0),window.setTimeout(()=>x(!1),1400))}catch{}}return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:t?.title??"Blog"}),e.jsxs("div",{className:"min-h-screen bg-white pb-28 text-slate-900 dark:bg-slate-950 dark:text-white",children:[e.jsx("div",{className:"mx-auto w-full max-w-7xl px-6",children:e.jsx($,{auth:c})}),e.jsxs("section",{className:"relative mt-4 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.jsx("img",{src:t?.image_url||"/bredrum.jpg",alt:"",className:"h-full w-full object-cover opacity-70",loading:"eager"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/75 via-black/35 to-black/10"})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-6 py-10 sm:py-12",children:[e.jsxs("nav",{className:"text-xs font-semibold text-white/80",children:[e.jsx(o,{href:"/",className:"hover:text-white",children:"Home"}),e.jsx("span",{className:"px-2 text-white/60",children:"/"}),e.jsx(o,{href:"/blogs",className:"hover:text-white",children:"Blogs"}),e.jsx("span",{className:"px-2 text-white/60",children:"/"}),e.jsx("span",{className:"text-white",children:t?.title??"Blog"})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl",children:t?.title}),e.jsxs("div",{className:"mt-2 text-sm text-white/85",children:[t?.author_name?`Imeandikwa na ${t.author_name} • `:"",g(t?.published_at)]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(o,{href:"/blogs",className:"inline-flex items-center justify-center rounded-xl bg-white/10 px-5 py-3 text-sm font-bold text-white ring-1 ring-white/25 backdrop-blur transition hover:bg-white/15 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-black",children:"← Rudi Blogs"}),e.jsxs("button",{type:"button",onClick:N,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-white/10 px-5 py-3 text-sm font-bold text-white ring-1 ring-white/25 backdrop-blur transition hover:bg-white/15 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-black",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] leading-none","aria-hidden":"true",children:"share"}),p?"Copied":"Share"]})]})]})]})})]}),e.jsx("div",{className:"mx-auto w-full max-w-7xl px-6 py-10",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1fr_340px] lg:items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-200 dark:bg-slate-900 dark:ring-slate-800",children:[e.jsx("div",{className:"overflow-hidden rounded-xl bg-slate-200 dark:bg-slate-800",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.title,className:"h-[260px] w-full object-cover sm:h-[420px]",loading:"lazy"}):e.jsx("div",{className:"h-[260px] w-full sm:h-[420px]"})}),e.jsx("div",{className:"prose prose-slate mt-6 max-w-none prose-p:leading-relaxed dark:prose-invert",children:f.map((s,d)=>e.jsx("p",{children:s},d))})]}),e.jsxs("div",{className:"mt-10 rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-200 dark:bg-slate-900 dark:ring-slate-800",children:[e.jsx("div",{className:"text-lg font-extrabold",children:"Maoni"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Acha maoni yako hapa chini"}),e.jsxs("form",{onSubmit:v,className:"mt-6 grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Jina"}),e.jsx("input",{value:m.name,onChange:s=>h("name",s.target.value),className:"mt-2 w-full rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-slate-800 dark:bg-slate-950 dark:text-white",placeholder:"Andika jina lako"}),n.name?e.jsx("div",{className:"mt-1 text-xs text-red-600",children:n.name}):null]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Ujumbe"}),e.jsx("textarea",{value:m.message,onChange:s=>h("message",s.target.value),rows:4,className:"mt-2 w-full rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-slate-800 dark:bg-slate-950 dark:text-white",placeholder:"Andika maoni yako"}),n.message?e.jsx("div",{className:"mt-1 text-xs text-red-600",children:n.message}):null]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"submit",disabled:j,className:"inline-flex items-center justify-center rounded-lg bg-primary px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 disabled:cursor-not-allowed disabled:opacity-70",children:"Tuma Maoni"})})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[(a??[]).map(s=>e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-800 dark:bg-slate-950",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:s.name}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:g(s.created_at)})]}),e.jsx("div",{className:"mt-2 text-sm text-slate-700 dark:text-slate-200",children:s.message})]},s.id)),(a??[]).length===0?e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300 bg-white p-6 text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-300",children:"Hakuna maoni bado. Kuwa wa kwanza kuandika."}):null]})]})]}),e.jsx("aside",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-slate-200 dark:bg-slate-900 dark:ring-slate-800",children:[e.jsx("div",{className:"text-sm font-extrabold text-slate-900 dark:text-white",children:"More Blogs"}),e.jsxs("div",{className:"mt-4 grid gap-3",children:[(l??[]).map(s=>e.jsxs(o,{href:`/blogs/${s.slug}`,className:"group flex items-center gap-3 rounded-xl border border-slate-200 bg-white p-3 transition hover:border-slate-300 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800",children:[e.jsx("div",{className:"h-12 w-12 overflow-hidden rounded-lg bg-slate-200 dark:bg-slate-800",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.title,className:"h-full w-full object-cover",loading:"lazy"}):null}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-bold text-slate-900 dark:text-white",children:s.title}),e.jsx("div",{className:"mt-0.5 text-xs text-slate-500 dark:text-slate-400",children:T(s.published_at)})]}),e.jsx("div",{className:"ml-auto text-slate-400 transition group-hover:translate-x-0.5 group-hover:text-primary",children:"→"})]},s.id??s.slug)),(l??[]).length===0?e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300 bg-white p-4 text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-300",children:"Hakuna blog nyingine."}):null]})]})})]})}),e.jsx("div",{className:"mx-auto w-full max-w-7xl px-6 pb-20",children:e.jsx(z,{laravelVersion:r,phpVersion:i})}),e.jsx(M,{})]})]})}export{P as default};
